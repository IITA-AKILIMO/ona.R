<p><link href="http://kevinburke.bitbucket.org/markdowncss/markdown.css" rel="stylesheet"></link></p>

<h1>Quality control &ndash; how long did survey authoring take?</h1>

<p>formhub.R makes is easy to download and work with datasets on <a href="http://formhub.org">formhub</a>. In this showcase, we will demonstrate how to figure out how long enumerators take to enter survey data, and correlate completion time with enumerator and date of survey. </p>

<p>After reading the dataset, we want to prepare two basic fields, the first one, <code>completion_time</code> will denote how long it took someone to fill the survey out. The second will be the enumerator&#39;s initial (which in this case is completely identifying, and helps us process multiple spellings).</p>

<pre><code class="r">source(&quot;../formhub.R&quot;)
formhubData &lt;- formhubRead(&quot;~/Downloads/Some_Data.csv&quot;, &quot;~/Downloads/Some_Schema.json&quot;)
some_data &lt;- formhubData@data
some_schema &lt;- formhubData@schema

# first subtract start time from end time, then, convert that to minutes
some_data$completion_time &lt;- some_data$end - some_data$start
some_data$completion_time &lt;- some_data$completion_time/eminutes(1)

library(stringr)
some_data$enumerator_initial &lt;- factor(toupper(str_extract(some_data$research_asst_name, 
    &quot;[a-zA-Z]&quot;)))
</code></pre>

<p>Now, we can start plotting. Lets start with completion time.</p>

<pre><code class="r">library(ggplot2)
qplot(data = some_data, x = completion_time)
</code></pre>

<p><img src="figure/plot_completiontime.png" alt="plot of chunk plot_completiontime"/> </p>

<p>Looks like most of the time, it is taking a short amount of time, but that some time, it takes quite a while (1000 minutes ~ 24 hours; the longest survey is getting finished up a day after it was opened). </p>

<p>Lets scale the x-axis by taking a log for a better display, and see which enumerators are taking the longest:</p>

<pre><code class="r">qplot(data = some_data, x = completion_time, fill = enumerator_initial) + 
    scale_x_log10()
</code></pre>

<p><img src="figure/plot_completiontime_by_enumerator.png" alt="plot of chunk plot_completiontime_by_enumerator"/> </p>

<p>Look like &ldquo;A&rdquo; and &ldquo;I&rdquo; filled out quite a few surveys over long spans of time, but &ldquo;Y&rdquo; never did, and &ldquo;S&rdquo; did, but only once. Maybe we should explore a little further, to see if there are patterns according to <em>when</em> the survey was done that explain the time it took to fill out each survey..</p>

<pre><code class="r"># note: fill, which applies for histograms, is now color, for a point-plot
qplot(data = some_data, x = completion_time, color = enumerator_initial, 
    y = date) + scale_x_log10()
</code></pre>

<p><img src="figure/plot_completiontime_by_time.png" alt="plot of chunk plot_completiontime_by_time"/> </p>

<p>Interestingly, in this particular instance, the surveying seems to have been done in two &ldquo;batches&rdquo;, and almost all the surveying that took a long time seems to have happened on the first day. Kudos to the survey team in charge&ndash;they seemed to have ironed out errors early!</p>
